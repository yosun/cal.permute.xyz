
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.5">
    <title>cal.PERMUTE.xyz</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!--script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script-->

    <style> 
      /*
//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.min.css
https://codepen.io/marclundgren/pen/HbymE
*/


    </style>

    <!-- Custom styles for this template -->
    <link href="cal.css" rel="stylesheet">
  </head>
  <body> 

    <center><h1>An Advant Calendar for Creativity</h1></center><hr />

    <a href="https://github.com/yosun/cal.permute.xyz" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#333333; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <div id="mainbody" class="container"> 
      
    </div>

    <div id="loading"> 
      <div class="d-flex justify-content-center"> 
          <div class="spinner-grow" role="status">
            <span class="sr-only"> Loading... </span>
          </div> 
      </div> 
    </div>



    <!--button type="button" class="launch_modal" data-title="testing" data-image="https://via.placeholder.com/300x240.png" data-target="#modal_focus" data-toggle="modal">
      Launch demo modal
    </!--button-->

<footer class="text-muted">
  <div class="container">
    <center>cal.Permute.xyz is an Advent Calendar for Creativity - An AReality3D <a href="http://permute.xyz">Permute.xyz</a> project by I Yosun Chang - fork on <a href="https://github.com/yosun/cal.permute.xyz">Github</a></center>
  </div>
</footer>


<div class="modal fade" id="modal_focus" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 id="modal-title">Modal Title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img src="" id="modal-img" />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Send message</button>
      </div>
    </div>
  </div>
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<!--script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
<script type='text/javascript'>    
  var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/14OmxfvNn8JaLv5q-TqmBQ8FnelaIfXtHUi4cRl9kl1A/edit?usp=sharing';

  function init() {
    Tabletop.init( { key: publicSpreadsheetUrl,
                     callback: showInfo,
                     simpleSheet: true } )
  }

  function showInfo(data, tabletop) { 
      var data = tabletop.data(); 
      var datamonth=[];
      var uniquemonths=[];

      // process into reverse month;
      $.each( data, function(i, row) {
 
       if(!uniquemonths.includes(month(row['date']))){
         uniquemonths.push(month(row['date']));
         
         datamonth[month(row['date'])] = [row];
       }else  
       datamonth[month(row['date'])].push(row);

      });

      //console.log(datamonth[0].length);console.log(datamonth[1].length);
 
      // render
      for(m=(uniquemonths.length-1);m>=0;m--){
        month = uniquemonths[m]; 
        yr = year(datamonth[month][0]['date']); 
        aname = 'ym_' + yr+'_'+month;
        $('#mainbody').append('<a name="'+aname+'"></a><header><div class="container"><center><h1><a href="#'+aname+'">'+GetReadableMonth(m)+' '+yr+'</a></h1></center></div></header><main role="main">  <div class="album py-5 bg-light"><div class="container"> <div class="grid-calendar"> <div class="row calendar-week-header">'+weekheader()+'</div>   <div id="row'+m+'" class="row calendar-week"> ');

        // process days of each month;
          $.each( datamonth[month], function(i, row) {
            var day = dow(row['date']);  

            // hack to fix first day
            if(i == 0){
              if(day==0){

              }else{
                  for(var j = day ; j > 0 ; j --)
                  $('#row'+m).append(emptycell());
              }
            }
            var cell = eachCell(row);  
            $('#row'+m).append(cell);
          });  

          $('#mainbody').append('</div>   </div> </div> </div> </main>');
      }
      

      // done!
      $('#loading').hide();
  }

  function eachCell(row){ 
      if(row['pic']==undefined ||row['pic'].length<1)var pic = 'https://s3.amazonaws.com/cal.permute.xyz/cal.permute.xyz_default_gray2.png';
      else var pic = row['pic'];

      var desc = row['desc'];
      if(desc==undefined||desc.length<0||desc==''){
        var desc = "<a data-title='"+row['what']+"' data-image='"+pic+"' class='launch_modal'><img class='img-fluid' src='"+pic+"' /></a>";
      } 

  return '<div class="col-xs-1 grid-cell">'+
          '<div class="card mb-4 shadow-sm">'+
            '<a data-toggle="popover" data-content="'+desc+'" title="'+row['what']+'"><img class="card-img-top daycover" focusable="false" role="img" aria-label="Saliant Summary for Today" src="'+pic+'" /></a>'+
            '<div class="card-body">'+
                    '<div class="card-title padme">'+row['what_short']+'</div>'+
              '<div class="d-flex justify-content-between align-items-center padme">'+
                    '<div class="btn-group">'+
                  '<button type="button" class="btn btn-sm btn-outline-secondary smallertxt">#'+row['category']+'</button> '+
                '</div>'+
                '<div class="cal-date text-muted">'+day(row['date'])+'</div>'+
              '</div>'+
            '</div>'+
          '</div>'+
        '</div>';
  }
  function emptycell(){
return '<div class="col-xs-1 grid-cell">'+
          '<div class="card mb-4 shadow-sm bg-dark">'+
            '<img class="bd-placeholder-img card-img-top daycover" focusable="false" role="img" aria-label="Placeholder: Thumbnail" src="https://s3.amazonaws.com/cal.permute.xyz/cal.permute.xyz_default_gray2.png" />'+
            '<div class="card-body">'+
                    '<div class="card-title padme text-muted font-italic"> A Day Last Month </div>'+
              '<div class="d-flex justify-content-between align-items-center padme">'+
                    '<div class="btn-group"></div>'+
                '<div class="cal-date text-muted"> x </div>'+
              '</div>'+
            '</div>'+
          '</div>'+
        '</div>';
  }

// date helpers
  function day(date){
    return new Date(date).getDate();
  }
  function dow(date){
    return new Date(date).getDay();
  } 
  function month(date){
    return new Date(date).getMonth();
  }
  function year(date){
    return new Date(date).getFullYear();
  }
  function GetReadableMonth(n){
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    return months[n];
  }
  function weekheader(){return'<div class="col-xs-1 grid-cell h3 text-muted"><div><div><span>Sunday</span></div></div></div>'+
                            '<div class="col-xs-1 grid-cell h3"><div><div><span>Monday</span></div></div></div>'+
                            '<div class="col-xs-1 grid-cell h3"><div><div><span>Tuesday</span></div></div></div>'+
                            '<div class="col-xs-1 grid-cell h3"><div><div><span>Wednesday</span></div></div></div>'+
                            '<div class="col-xs-1 grid-cell h3"><div><div><span>Thursday</span></div></div></div>'+
                            '<div class="col-xs-1 grid-cell h3"><div><div><span>Friday</span></div></div></div>'+
                            '<div class="col-xs-1 grid-cell h3 text-muted"><div><div><span>Saturday</span></div></div></div>';
  }


// tada!
  $(document).ready(function(){
    init();  

    $('body').popover({
      selector: '[data-toggle="popover"]',
      placement:'top',  
      html: true,
    });
 
    $('.launch_modal').on( "click", function() {  
      $('#modal_focus').modal('show');
    });

    $('#modal_focus').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget); // Button that triggered the modal
      var title = button.data('title'); // Extract info from data-* attributes
      var image = button.data('image'); // Extract info from data-* attributes
      console.log(title);
      // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
      // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
      var modal = $(this);
      modal.find('#modal-img').attr('src',image); 
      modal.find('#modal-title').html(title);


    });
  });
</script>

</body>




</html>
